"use strict";!function(){var e=document.querySelector(".menu"),c=document.querySelectorAll(".acco-menu__item");e.addEventListener("click",function(e){for(var t=0;t<c.length;t++)c[t].classList.remove("acco-menu__item--active")});for(var t=function(n){c[n].addEventListener("click",function(e){if(e.preventDefault(),e.stopPropagation(),c[n].classList.contains("acco-menu__item--active"))c[n].classList.remove("acco-menu__item--active");else{for(var t=0;t<c.length;t++)c[t].classList.remove("acco-menu__item--active");c[n].classList.add("acco-menu__item--active")}})},n=0;n<c.length;n++)t(n)}(),function(){var e=document.querySelector(".team"),c=document.querySelectorAll(".member__card");e.addEventListener("click",function(){for(var e=0;e<c.length;e++)c[e].classList.remove("member__card--active")});for(var t=function(n){c[n].addEventListener("click",function(e){if(e.preventDefault(),e.stopPropagation(),c[n].classList.contains("member__card--active"))c[n].classList.remove("member__card--active");else{for(var t=0;t<c.length;t++)c[t].classList.remove("member__card--active");c[n].classList.add("member__card--active")}})},n=0;n<c.length;n++)t(n)}(),function(){var t=document.querySelector("#form-order"),e=document.querySelector("#orderButton"),a=new XMLHttpRequest,c=document.querySelector(".success-order"),r=document.querySelector(".failed-order"),o=document.querySelector("#close__success-message"),i=document.querySelector("#close__failed-message"),s=document.querySelectorAll(".required"),n=document.querySelectorAll(".number-only"),l=document.querySelector(".text-only"),d=document.querySelector("#user-phone"),u=document.querySelector(".helpForNumber");function v(){if(4==a.readyState&&200==a.status){var e=JSON.parse(a.responseText);if(1==e.status)console.log("Заказ принят!"),c.style.display="flex",document.body.classList.add("lock"),o.addEventListener("click",function(){c.style.display="none",document.body.classList.remove("lock");for(var e=0;e<s.length;e++)s[e].classList.remove("required--active");document.querySelector("#resetButton").click()});else if(0==e.status){console.log("Ошибка в принятии заказа, попробуйте позже");for(var t=function(e){""!=s[e].value&&"+7"!=s[e].value||(s[e].classList.add("required--active"),d.validity.patternMismatch||d.classList.remove("required--active")),s[e].addEventListener("click",function(){s[e].classList.remove("required--active")})},n=0;n<s.length;n++)t(n);r.style.display="flex",document.body.classList.add("lock"),i.addEventListener("click",function(){r.style.display="none",document.body.classList.remove("lock")})}}}e.addEventListener("click",function(e){e.preventDefault(),function(e){var t=new FormData,n=e.elements.user_name,c=e.elements.user_phone,r=e.elements.user_comment,o="";o=c.validity.patternMismatch?"https://webdev-api.loftschool.com/sendmail/fail":"https://webdev-api.loftschool.com/sendmail";for(var i=0;i<s.length;i++)""==s[i].value&&(o="https://webdev-api.loftschool.com/sendmail/fail");t.append("name",n.value),t.append("phone",c.value),t.append("comment",r.value),t.append("to","mail@mail.ru"),a.open("POST",o),a.setRequestHeader="XMLHttpRequest",a.onreadystatechange=v,a.send(t)}(t)});for(var m=0;m<n.length;m++)n[m].addEventListener("keydown",function(e){65<=e.keyCode&&e.keyCode<=90&&e.preventDefault()});l.addEventListener("keydown",function(e){!isFinite(e.key)&&"+"!=e.key&&"/"!=e.key||e.preventDefault()}),d.addEventListener("focus",function(){d.validity.patternMismatch||"+7"==d.value?u.innerText="Пример ввода: +79990009900":u.innerText="",d.addEventListener("blur",function(){u.innerText=""})}),document.querySelector("#resetButton").addEventListener("click",function(){for(var e=0;e<s.length;e++)s[e].classList.remove("required--active")})}(),function(){var e=document.body.querySelector(".menu-hamburger"),t=document.body.querySelector("#close-btn__nav-menu"),n=document.body.querySelector(".nav-menu-fullscreen");e.addEventListener("click",function(){n.classList.remove("deactive"),document.body.classList.add("lock")}),t.addEventListener("click",function(){n.classList.add("deactive"),document.body.classList.remove("lock")})}(),function(){for(var e=document.querySelectorAll(".more-review"),t=document.querySelectorAll(".read-review"),c=document.querySelector(".reviews"),r=document.querySelectorAll(".review__popup"),n=function(n){e[n].addEventListener("click",function(e){e.preventDefault();var t=document.createElement("div");t.innerHTML=r[n].innerHTML,t.classList.add("review__popup--active"),t.children[0].classList.add("review__content--active"),c.appendChild(t),document.body.classList.add("lock"),t.children[0].children[0].addEventListener("click",function(){t.classList.remove("review__popup--active"),t.children[0].classList.remove("review__content--active"),t.remove(),document.body.classList.remove("lock")})})},o=0;o<e.length;o++)n(o);var i=function(n){t[n].addEventListener("click",function(e){e.preventDefault();var t=document.createElement("div");t.innerHTML=r[n].innerHTML,t.classList.add("review__popup--active"),t.children[0].classList.add("review__content--active"),c.appendChild(t),document.body.classList.add("lock"),t.children[0].children[0].addEventListener("click",function(){t.classList.remove("review__popup--active"),t.children[0].classList.remove("review__content--active"),t.remove(),document.body.classList.remove("lock")})})};for(o=0;o<t.length;o++)i(o)}(),function(){var e=document.querySelector(".burger-slider__arrow-left"),t=document.querySelector(".burger-slider__arrow-right"),n=document.querySelector(".burger-slider__list"),c=document.querySelectorAll(".burger-slider__item").length-1,r=0;t.addEventListener("click",function(){-100*c<r?r+=-100:r==-100*c&&(r=0),n.style.transform="translateX("+r+"%)"}),e.addEventListener("click",function(){r<0?r+=100:0==r&&(r=-100*c),n.style.transform="translateX("+r+"%)"})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjY28taG9yaXouanMiLCJhY2NvLXZlcnQuanMiLCJmb3JtLmpzIiwibmF2LW1lbnUuanMiLCJwb3AtdXBfcmV2aWV3LXNlYy5qcyIsInNsaWRlci5qcyJdLCJuYW1lcyI6WyJtZW51IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWNjb0l0ZW0iLCJxdWVyeVNlbGVjdG9yQWxsIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJpIiwibGVuZ3RoIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiX2xvb3AiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsImNvbnRhaW5zIiwiYWRkIiwidGVhbU1lbnUiLCJtZW1iZXJDYXJkIiwiX2xvb3AyIiwiZm9ybSIsIm9yZGVyQnV0dG9uIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJzdWNjZXNzT3JkZXIiLCJmYWlsZWRPcmRlciIsImNsb3NlU3VjY2Vzc01lc3NhZ2UiLCJjbG9zZUZhaWxlZE1lc3NhZ2UiLCJyZXF1aXJlZEl0ZW1zIiwibnVtYmVyT25seSIsInRleHRPbmx5IiwidXNlclBob25lIiwiaGVscEZvcm0iLCJyZXFSZWFkeVN0YXRlQ2hhbmdlIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsIm1lc3NhZ2UiLCJKU09OIiwicGFyc2UiLCJyZXNwb25zZVRleHQiLCJjb25zb2xlIiwibG9nIiwic3R5bGUiLCJkaXNwbGF5IiwiYm9keSIsImNsaWNrIiwiX2xvb3AzIiwidmFsdWUiLCJ2YWxpZGl0eSIsInBhdHRlcm5NaXNtYXRjaCIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJ1c2VyTmFtZSIsImVsZW1lbnRzIiwidXNlcl9uYW1lIiwidXNlcl9waG9uZSIsInVzZXJDb21tZW50IiwidXNlcl9jb21tZW50IiwidXJsIiwiYXBwZW5kIiwib3BlbiIsInNldFJlcXVlc3RIZWFkZXIiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJzZW5kIiwiYWpheEZvcm0iLCJrZXlDb2RlIiwiaXNGaW5pdGUiLCJrZXkiLCJpbm5lclRleHQiLCJuYXZNZW51QnRuIiwibmF2TWVudUJ0bkNsb3NlIiwibmF2TWVudUxpc3QiLCJidXR0b25Nb3JlIiwiYnV0dG9uUmVhZCIsInJldmlld1NlY3Rpb24iLCJyZXZpZXdQb3B1cCIsIl9sb29wNCIsIm5ld0RpdiIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lckhUTUwiLCJjaGlsZHJlbiIsImFwcGVuZENoaWxkIiwiX2xvb3A1IiwidG9MZWZ0IiwidG9SaWdodCIsInNsaWRlckxpc3QiLCJzbGlkZXJMZW5ndGgiLCJjb3VudCIsInRyYW5zZm9ybSJdLCJtYXBwaW5ncyI6ImNBQUEsV0FDQSxJQUFBQSxFQUFBQyxTQUFBQyxjQUFBLFNBQ0FDLEVBQUFGLFNBQUFHLGlCQUFBLG9CQUVBSixFQUFBSyxpQkFBQSxRQUFBLFNBQUFDLEdBQ0EsSUFBQSxJQUFBQyxFQUFBLEVBQUFBLEVBQUFKLEVBQUFLLE9BQUFELElBQ0FKLEVBQUFJLEdBQUFFLFVBQUFDLE9BQUEsNkJBSUEsSUFWQSxJQUFBQyxFQUFBLFNBVUFKLEdBQ0FKLEVBQUFJLEdBQUFGLGlCQUFBLFFBQUEsU0FBQUMsR0FJQSxHQUhBQSxFQUFBTSxpQkFDQU4sRUFBQU8sa0JBRUFWLEVBQUFJLEdBQUFFLFVBQUFLLFNBQUEsMkJBQ0FYLEVBQUFJLEdBQUFFLFVBQUFDLE9BQUEsK0JBQ0EsQ0FDQSxJQUFBLElBQUFILEVBQUEsRUFBQUEsRUFBQUosRUFBQUssT0FBQUQsSUFDQUosRUFBQUksR0FBQUUsVUFBQUMsT0FBQSwyQkFHQVAsRUFBQUksR0FBQUUsVUFBQU0sSUFBQSwrQkFaQVIsRUFBQSxFQUFBQSxFQUFBSixFQUFBSyxPQUFBRCxJQUFBSSxFQUFBSixHQVZBLEdDQUEsV0FDQSxJQUFBUyxFQUFBZixTQUFBQyxjQUFBLFNBQ0FlLEVBQUFoQixTQUFBRyxpQkFBQSxpQkFFQVksRUFBQVgsaUJBQUEsUUFBQSxXQUNBLElBQUEsSUFBQUUsRUFBQSxFQUFBQSxFQUFBVSxFQUFBVCxPQUFBRCxJQUNBVSxFQUFBVixHQUFBRSxVQUFB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LFNBQUEsR0FBQTFFLGlCQUFBLFFBQUEsV0FDQXVFLEVBQUFuRSxVQUFBQyxPQUFBLHlCQUNBa0UsRUFBQUcsU0FBQSxHQUFBdEUsVUFBQUMsT0FBQSwyQkFDQWtFLEVBQUFsRSxTQUNBVCxTQUFBMEMsS0FBQWxDLFVBQUFDLE9BQUEsYUFoQkEsSUFBQUgsRUFBQSxFQUFBQSxFQUFBaUUsRUFBQWhFLE9BQUFELElBQUEwRSxFQUFBMUUsR0EzQkEsR0NBQSxXQUNBLElBQUEyRSxFQUFBakYsU0FBQUMsY0FBQSw4QkFDQWlGLEVBQUFsRixTQUFBQyxjQUFBLCtCQUNBa0YsRUFBQW5GLFNBQUFDLGNBQUEsd0JBRUFtRixFQURBcEYsU0FBQUcsaUJBQUEsd0JBQ0FJLE9BQUEsRUFFQThFLEVBQUEsRUFFQUgsRUFBQTlFLGlCQUFBLFFBQUEsWUFHQSxJQUFBZ0YsRUFBQUMsRUFDQUEsSUFIQSxJQUlBQSxJQUFBLElBQUFELElBQ0FDLEVBQUEsR0FHQUYsRUFBQTNDLE1BQUE4QyxVQUFBLGNBQUFELEVBQUEsT0FJQUosRUFBQTdFLGlCQUFBLFFBQUEsV0FHQWlGLEVBQUEsRUFDQUEsR0FIQSxJQUlBLEdBQUFBLElBQ0FBLEdBQUEsSUFBQUQsR0FHQUQsRUFBQTNDLE1BQUE4QyxVQUFBLGNBQUFELEVBQUEsT0EvQkEiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKSB7XG4gIGNvbnN0IG1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWVudScpLFxuICAgIGFjY29JdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFjY28tbWVudV9faXRlbScpO1xuXG4gIG1lbnUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWNjb0l0ZW0ubGVuZ3RoOyBpKyspIHtcbiAgICAgIGFjY29JdGVtW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2FjY28tbWVudV9faXRlbS0tYWN0aXZlJyk7XG4gICAgfTtcbiAgfSk7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhY2NvSXRlbS5sZW5ndGg7IGkrKykge1xuICAgIGFjY29JdGVtW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgIGlmIChhY2NvSXRlbVtpXS5jbGFzc0xpc3QuY29udGFpbnMoJ2FjY28tbWVudV9faXRlbS0tYWN0aXZlJykpIHtcbiAgICAgICAgYWNjb0l0ZW1baV0uY2xhc3NMaXN0LnJlbW92ZSgnYWNjby1tZW51X19pdGVtLS1hY3RpdmUnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWNjb0l0ZW0ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBhY2NvSXRlbVtpXS5jbGFzc0xpc3QucmVtb3ZlKCdhY2NvLW1lbnVfX2l0ZW0tLWFjdGl2ZScpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGFjY29JdGVtW2ldLmNsYXNzTGlzdC5hZGQoJ2FjY28tbWVudV9faXRlbS0tYWN0aXZlJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG59KSgpXG4iLCIoZnVuY3Rpb24oKSB7XG4gIGNvbnN0IHRlYW1NZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRlYW0nKSxcbiAgICBtZW1iZXJDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1lbWJlcl9fY2FyZCcpO1xuXG4gIHRlYW1NZW51LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWVtYmVyQ2FyZC5sZW5ndGg7IGkrKykge1xuICAgICAgbWVtYmVyQ2FyZFtpXS5jbGFzc0xpc3QucmVtb3ZlKCdtZW1iZXJfX2NhcmQtLWFjdGl2ZScpO1xuICAgIH07XG4gIH0pO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbWVtYmVyQ2FyZC5sZW5ndGg7IGkrKykge1xuICAgIG1lbWJlckNhcmRbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgaWYgKG1lbWJlckNhcmRbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdtZW1iZXJfX2NhcmQtLWFjdGl2ZScpKSB7XG4gICAgICAgIG1lbWJlckNhcmRbaV0uY2xhc3NMaXN0LnJlbW92ZSgnbWVtYmVyX19jYXJkLS1hY3RpdmUnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWVtYmVyQ2FyZC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIG1lbWJlckNhcmRbaV0uY2xhc3NMaXN0LnJlbW92ZSgnbWVtYmVyX19jYXJkLS1hY3RpdmUnKTtcbiAgICAgICAgfVxuICAgICAgICBtZW1iZXJDYXJkW2ldLmNsYXNzTGlzdC5hZGQoJ21lbWJlcl9fY2FyZC0tYWN0aXZlJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG59KSgpXG4iLCIoZnVuY3Rpb24oKSB7XG4gIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZm9ybS1vcmRlcicpLFxuICAgIG9yZGVyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI29yZGVyQnV0dG9uJyksXG4gICAgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCksXG4gICAgc3VjY2Vzc09yZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnN1Y2Nlc3Mtb3JkZXInKSxcbiAgICBmYWlsZWRPcmRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mYWlsZWQtb3JkZXInKSxcbiAgICBjbG9zZVN1Y2Nlc3NNZXNzYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Nsb3NlX19zdWNjZXNzLW1lc3NhZ2UnKSxcbiAgICBjbG9zZUZhaWxlZE1lc3NhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2xvc2VfX2ZhaWxlZC1tZXNzYWdlJyksXG4gICAgcmVxdWlyZWRJdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5yZXF1aXJlZCcpLFxuICAgIG51bWJlck9ubHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubnVtYmVyLW9ubHknKSxcbiAgICB0ZXh0T25seSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZXh0LW9ubHknKSxcbiAgICB1c2VyUGhvbmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdXNlci1waG9uZScpLFxuICAgIGhlbHBGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlbHBGb3JOdW1iZXInKTtcblxuXG4gIGZ1bmN0aW9uIHJlcVJlYWR5U3RhdGVDaGFuZ2UoKSB7IC8vID8/XG4gICAgaWYgKHhoci5yZWFkeVN0YXRlID09IDQgJiYgeGhyLnN0YXR1cyA9PSAyMDApIHtcblxuICAgICAgbGV0IG1lc3NhZ2UgPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpO1xuXG4gICAgICBpZiAobWVzc2FnZS5zdGF0dXMgPT0gMSkgeyAvLyDQstCw0LvQuNC00L3QvtC1INC30LDQv9C+0LvQvdC10L3QuNC1XG4gICAgICAgIGNvbnNvbGUubG9nKCfQl9Cw0LrQsNC3INC/0YDQuNC90Y/RgiEnKTtcbiAgICAgICAgc3VjY2Vzc09yZGVyLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdsb2NrJyk7XG4gICAgICAgIGNsb3NlU3VjY2Vzc01lc3NhZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgc3VjY2Vzc09yZGVyLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2xvY2snKTtcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlcXVpcmVkSXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHJlcXVpcmVkSXRlbXNbaV0uY2xhc3NMaXN0LnJlbW92ZSgncmVxdWlyZWQtLWFjdGl2ZScpOyAvLyDRg9C00LDQu9C10L3QuNC1INC+0LHQstC+0LTQutC4INC60YDQsNGB0L3Ri9C8LCDQtdGB0LvQuCDQv9C+0LvRjyDQt9Cw0L/QvtC70L3QtdC90Ysg0L/RgNCw0LLQuNC70YzQvdC+XG5cblxuICAgICAgICAgIH07XG4gICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Jlc2V0QnV0dG9uJykuY2xpY2soKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKG1lc3NhZ2Uuc3RhdHVzID09IDApIHsgLy8g0L3QtdCy0LDQu9C40LTQvdC+0LUg0LfQsNC/0L7Qu9C90LXQvdC40LVcbiAgICAgICAgY29uc29sZS5sb2coJ9Ce0YjQuNCx0LrQsCDQsiDQv9GA0LjQvdGP0YLQuNC4INC30LDQutCw0LfQsCwg0L/QvtC/0YDQvtCx0YPQudGC0LUg0L/QvtC30LbQtScpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlcXVpcmVkSXRlbXMubGVuZ3RoOyBpKyspIHsgICAgLy8g0L7QsdCy0L7QtNC60LAg0LrRgNCw0YHQvdGL0Lwg0L3QtdC30LDQv9C+0LvQvdC10L3QvdGL0LUg0L/QvtC70Y8uXG4gICAgICAgICAgaWYgKHJlcXVpcmVkSXRlbXNbaV0udmFsdWUgPT0gJycgfHwgcmVxdWlyZWRJdGVtc1tpXS52YWx1ZSA9PSAnKzcnKSB7XG4gICAgICAgICAgICByZXF1aXJlZEl0ZW1zW2ldLmNsYXNzTGlzdC5hZGQoJ3JlcXVpcmVkLS1hY3RpdmUnKTtcbiAgICAgICAgICAgIGlmICghdXNlclBob25lLnZhbGlkaXR5LnBhdHRlcm5NaXNtYXRjaCkge1xuICAgICAgICAgICAgICB1c2VyUGhvbmUuY2xhc3NMaXN0LnJlbW92ZSgncmVxdWlyZWQtLWFjdGl2ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgICAgcmVxdWlyZWRJdGVtc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsgLy8g0YPQtNCw0LvQtdC90LjQtSDQvtCx0LLQvtC00LrQuCwg0L/RgNC4INC60LvQuNC60LUuXG4gICAgICAgICAgICByZXF1aXJlZEl0ZW1zW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ3JlcXVpcmVkLS1hY3RpdmUnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgZmFpbGVkT3JkZXIuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2xvY2snKTtcbiAgICAgICAgY2xvc2VGYWlsZWRNZXNzYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgIGZhaWxlZE9yZGVyLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2xvY2snKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH07XG4gIH07XG5cblxuICBmdW5jdGlvbiBhamF4Rm9ybShmb3JtKSB7XG4gICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCksXG4gICAgICB1c2VyTmFtZSA9IGZvcm0uZWxlbWVudHMudXNlcl9uYW1lLFxuICAgICAgdXNlclBob25lID0gZm9ybS5lbGVtZW50cy51c2VyX3Bob25lLFxuICAgICAgdXNlckNvbW1lbnQgPSBmb3JtLmVsZW1lbnRzLnVzZXJfY29tbWVudCxcbiAgICAgIHVybCA9IFwiXCI7XG5cbiAgICBpZiAodXNlclBob25lLnZhbGlkaXR5LnBhdHRlcm5NaXNtYXRjaCkgeyAvLyDQv9GA0L7QstC10YDQutCwINC/0L4g0L/QsNGC0YLQtdGA0L3RgyDQvdC+0LzQtdGAINGC0LXQu9C10YTQvtC90LBcblxuICAgICAgdXJsID0gXCJodHRwczovL3dlYmRldi1hcGkubG9mdHNjaG9vbC5jb20vc2VuZG1haWwvZmFpbFwiO1xuICAgIH0gZWxzZSB7XG4gICAgICB1cmwgPSBcImh0dHBzOi8vd2ViZGV2LWFwaS5sb2Z0c2Nob29sLmNvbS9zZW5kbWFpbFwiO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVxdWlyZWRJdGVtcy5sZW5ndGg7IGkrKykgeyAvLyDQv9GA0L7QstC10YDQutCwINC90LAg0LfQsNC/0L7Qu9C90LXQvdC90L7RgdGC0Ywg0YTQvtGA0LxcbiAgICAgIGlmIChyZXF1aXJlZEl0ZW1zW2ldLnZhbHVlID09IFwiXCIpIHtcbiAgICAgICAgdXJsID0gXCJodHRwczovL3dlYmRldi1hcGkubG9mdHNjaG9vbC5jb20vc2VuZG1haWwvZmFpbFwiO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZvcm1EYXRhLmFwcGVuZCgnbmFtZScsIHVzZXJOYW1lLnZhbHVlKTtcbiAgICBmb3JtRGF0YS5hcHBlbmQoJ3Bob25lJywgdXNlclBob25lLnZhbHVlKTtcbiAgICBmb3JtRGF0YS5hcHBlbmQoJ2NvbW1lbnQnLCB1c2VyQ29tbWVudC52YWx1ZSk7XG4gICAgZm9ybURhdGEuYXBwZW5kKCd0bycsICdtYWlsQG1haWwucnUnKTtcblxuICAgIHhoci5vcGVuKFwiUE9TVFwiLCB1cmwpO1xuICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyID0gKFwiWC1SZXF1ZXN0ZWQtV2l0aFwiLCBcIlhNTEh0dHBSZXF1ZXN0XCIpO1xuICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSByZXFSZWFkeVN0YXRlQ2hhbmdlOyAvLyA/Pz9cbiAgICB4aHIuc2VuZChmb3JtRGF0YSk7XG4gIH07XG5cbiAgb3JkZXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIGFqYXhGb3JtKGZvcm0pO1xuICB9KTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IG51bWJlck9ubHkubGVuZ3RoOyBpKyspIHsgLy8g0LfQsNC/0YDQtdGCINCy0LLQvtC00LAg0LHRg9C60LJcbiAgICBudW1iZXJPbmx5W2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgaWYgKGUua2V5Q29kZSA+PSA2NSAmJiBlLmtleUNvZGUgPD0gOTApIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfTtcblxuICB0ZXh0T25seS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24gKGUpIHsgLy8g0LfQsNC/0YDQtdGCINCy0LLQvtC00LAg0YbQuNGE0YBcbiAgICBpZiAoaXNGaW5pdGUoZS5rZXkpIHx8IGUua2V5ID09ICcrJyB8fCBlLmtleSA9PSAnLycpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9O1xuICB9KTtcblxuXG5cbiAgdXNlclBob25lLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgKCkgPT4geyAvLyDQstGB0L/Qu9GL0LLQsNGO0YnQsNGPINC/0L7QtNGB0LrQsNC30LrQsCDQtNC70Y8g0LfQsNC/0L7Qu9C90LXQvdC40Y8g0YTQvtGA0LzRiyDRgtC10LvQtdGE0L7QvdCwXG4gICAgaWYgKHVzZXJQaG9uZS52YWxpZGl0eS5wYXR0ZXJuTWlzbWF0Y2ggfHwgdXNlclBob25lLnZhbHVlID09ICcrNycpIHtcbiAgICAgIGhlbHBGb3JtLmlubmVyVGV4dCA9ICfQn9GA0LjQvNC10YAg0LLQstC+0LTQsDogKzc5OTkwMDA5OTAwJztcbiAgICB9IGVsc2Uge1xuICAgICAgaGVscEZvcm0uaW5uZXJUZXh0ID0gJyc7XG4gICAgfTtcbiAgICB1c2VyUGhvbmUuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsICgpID0+IHsgLy8g0YHQutGA0YvRgtC40LUg0L/QvtC00YHQutCw0LfQutC4INC00LvRjyDQt9Cw0L/QvtC70L3QtdC90LjRjyDRhNC+0YDQvNGLINGC0LXQu9C10YTQvtC90LBcbiAgICAgIGhlbHBGb3JtLmlubmVyVGV4dCA9ICcnO1xuICAgIH0pO1xuICB9KTtcblxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcmVzZXRCdXR0b24nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlcXVpcmVkSXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHJlcXVpcmVkSXRlbXNbaV0uY2xhc3NMaXN0LnJlbW92ZSgncmVxdWlyZWQtLWFjdGl2ZScpO1xuICAgIH1cbiAgfSk7XG59KSgpXG4iLCIoZnVuY3Rpb24oKSB7XG4gIGNvbnN0IG5hdk1lbnVCdG4gPSBkb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3IoJy5tZW51LWhhbWJ1cmdlcicpLFxuICAgIG5hdk1lbnVCdG5DbG9zZSA9IGRvY3VtZW50LmJvZHkucXVlcnlTZWxlY3RvcignI2Nsb3NlLWJ0bl9fbmF2LW1lbnUnKSxcbiAgICBuYXZNZW51TGlzdCA9IGRvY3VtZW50LmJvZHkucXVlcnlTZWxlY3RvcignLm5hdi1tZW51LWZ1bGxzY3JlZW4nKTtcblxuICBuYXZNZW51QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgIG5hdk1lbnVMaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ2RlYWN0aXZlJyk7XG4gICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdsb2NrJyk7XG4gIH0pO1xuXG4gIG5hdk1lbnVCdG5DbG9zZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICBuYXZNZW51TGlzdC5jbGFzc0xpc3QuYWRkKCdkZWFjdGl2ZScpO1xuICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnbG9jaycpO1xuICB9KTtcbn0pKClcbiIsIihmdW5jdGlvbigpIHtcbiAgY29uc3QgYnV0dG9uTW9yZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb3JlLXJldmlldycpLFxuICAgIGJ1dHRvblJlYWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucmVhZC1yZXZpZXcnKSxcbiAgICByZXZpZXdTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJldmlld3MnKSxcbiAgICByZXZpZXdQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5yZXZpZXdfX3BvcHVwJyk7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBidXR0b25Nb3JlLmxlbmd0aDsgaSsrKSB7XG4gICAgYnV0dG9uTW9yZVtpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIGxldCBuZXdEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIG5ld0Rpdi5pbm5lckhUTUwgPSByZXZpZXdQb3B1cFtpXS5pbm5lckhUTUw7XG4gICAgICBuZXdEaXYuY2xhc3NMaXN0LmFkZCgncmV2aWV3X19wb3B1cC0tYWN0aXZlJyk7XG4gICAgICBuZXdEaXYuY2hpbGRyZW5bMF0uY2xhc3NMaXN0LmFkZCgncmV2aWV3X19jb250ZW50LS1hY3RpdmUnKTtcbiAgICAgIHJldmlld1NlY3Rpb24uYXBwZW5kQ2hpbGQobmV3RGl2KTtcblxuICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdsb2NrJyk7XG5cbiAgICAgIG5ld0Rpdi5jaGlsZHJlblswXS5jaGlsZHJlblswXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbmV3RGl2LmNsYXNzTGlzdC5yZW1vdmUoJ3Jldmlld19fcG9wdXAtLWFjdGl2ZScpO1xuICAgICAgICBuZXdEaXYuY2hpbGRyZW5bMF0uY2xhc3NMaXN0LnJlbW92ZSgncmV2aWV3X19jb250ZW50LS1hY3RpdmUnKTtcbiAgICAgICAgbmV3RGl2LnJlbW92ZSgpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2xvY2snKTtcbiAgICAgIH0pXG4gICAgfSk7XG5cbiAgfTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBidXR0b25SZWFkLmxlbmd0aDsgaSsrKSB7XG4gICAgYnV0dG9uUmVhZFtpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIGxldCBuZXdEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIG5ld0Rpdi5pbm5lckhUTUwgPSByZXZpZXdQb3B1cFtpXS5pbm5lckhUTUw7XG4gICAgICBuZXdEaXYuY2xhc3NMaXN0LmFkZCgncmV2aWV3X19wb3B1cC0tYWN0aXZlJyk7XG4gICAgICBuZXdEaXYuY2hpbGRyZW5bMF0uY2xhc3NMaXN0LmFkZCgncmV2aWV3X19jb250ZW50LS1hY3RpdmUnKTtcbiAgICAgIHJldmlld1NlY3Rpb24uYXBwZW5kQ2hpbGQobmV3RGl2KTtcblxuICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdsb2NrJyk7XG5cbiAgICAgIG5ld0Rpdi5jaGlsZHJlblswXS5jaGlsZHJlblswXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbmV3RGl2LmNsYXNzTGlzdC5yZW1vdmUoJ3Jldmlld19fcG9wdXAtLWFjdGl2ZScpO1xuICAgICAgICBuZXdEaXYuY2hpbGRyZW5bMF0uY2xhc3NMaXN0LnJlbW92ZSgncmV2aWV3X19jb250ZW50LS1hY3RpdmUnKTtcbiAgICAgICAgbmV3RGl2LnJlbW92ZSgpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2xvY2snKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gIH07XG59KSgpIiwiKGZ1bmN0aW9uKCkge1xuICBjb25zdCB0b0xlZnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnVyZ2VyLXNsaWRlcl9fYXJyb3ctbGVmdCcpLFxuICAgIHRvUmlnaHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnVyZ2VyLXNsaWRlcl9fYXJyb3ctcmlnaHQnKSxcbiAgICBzbGlkZXJMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1cmdlci1zbGlkZXJfX2xpc3QnKSxcbiAgICBzbGlkZXJJdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJ1cmdlci1zbGlkZXJfX2l0ZW0nKSxcbiAgICBzbGlkZXJMZW5ndGggPSBzbGlkZXJJdGVtLmxlbmd0aCAtIDE7XG5cbiAgbGV0IGNvdW50ID0gMDtcblxuICB0b1JpZ2h0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgIGxldCB0b1JpZ2h0ID0gLTEwMDtcblxuICAgIGlmIChjb3VudCA+IHNsaWRlckxlbmd0aCAqIC0xMDApIHtcbiAgICAgIGNvdW50ICs9IHRvUmlnaHQ7XG4gICAgfSBlbHNlIGlmIChjb3VudCA9PSBzbGlkZXJMZW5ndGggKiAtMTAwKSB7XG4gICAgICBjb3VudCA9IDA7XG4gICAgfTtcblxuICAgIHNsaWRlckxpc3Quc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVgoJyArIGNvdW50ICsgJyUpJztcbiAgfSk7XG5cblxuICB0b0xlZnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgbGV0IHRvTGVmdCA9IDEwMDtcblxuICAgIGlmIChjb3VudCA8IDApIHtcbiAgICAgIGNvdW50ICs9IHRvTGVmdDtcbiAgICB9IGVsc2UgaWYgKGNvdW50ID09IDApIHtcbiAgICAgIGNvdW50ID0gc2xpZGVyTGVuZ3RoICogLTEwMFxuICAgIH07XG5cbiAgICBzbGlkZXJMaXN0LnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVYKCcgKyBjb3VudCArICclKSc7XG4gIH0pO1xufSkoKSJdfQ==
